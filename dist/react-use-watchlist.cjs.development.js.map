{"version":3,"file":"react-use-watchlist.cjs.development.js","sources":["../src/useLocalStorage.ts","../src/index.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nexport default function useLocalStorage(\r\n  key: string,\r\n  initialValue: string\r\n): [string, (value: Function | string) => void] {\r\n  const [storedValue, setStoredValue] = React.useState(() => {\r\n    try {\r\n      const item =\r\n        typeof window !== \"undefined\" && window.localStorage.getItem(key);\r\n\r\n      return item ? item : initialValue;\r\n    } catch (error) {\r\n      return initialValue;\r\n    }\r\n  });\r\n\r\n  const setValue = (value: Function | string) => {\r\n    try {\r\n      const valueToStore =\r\n        value instanceof Function ? value(storedValue) : value;\r\n\r\n      setStoredValue(valueToStore);\r\n\r\n      window.localStorage.setItem(key, valueToStore);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return [storedValue, setValue];\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport useLocalStorage from \"./useLocalStorage\";\r\n\r\nexport interface Item {\r\n  id: string;\r\n  price: number;\r\n  quantity?: number;\r\n  itemTotal?: number;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface InitialState {\r\n  id: string;\r\n  items: Item[];\r\n  isEmpty: boolean;\r\n  totalItems: number;\r\n  totalUniqueItems: number;\r\n  //cartTotal: number;\r\n  metadata?: Metadata;\r\n}\r\n\r\nexport interface Metadata {\r\n  [key: string]: any;\r\n}\r\n\r\ninterface WatchlistProviderState extends InitialState {\r\n  addItem: (item: Item, quantity?: number) => void;\r\n  removeItem: (id: Item[\"id\"]) => void;\r\n  updateItem: (id: Item[\"id\"], payload: object) => void;\r\n  setItems: (items: Item[]) => void;\r\n  updateItemQuantity: (id: Item[\"id\"], quantity: number) => void;\r\n  emptyWatchlist: () => void;\r\n  getItem: (id: Item[\"id\"]) => any | undefined;\r\n  inWatchlist: (id: Item[\"id\"]) => boolean;\r\n  clearWatchlistMetadata: () => void;\r\n  setWatchlistMetadata: (metadata: Metadata) => void;\r\n  updateWatchlistMetadata: (metadata: Metadata) => void;\r\n}\r\n\r\nexport type Actions =\r\n  | { type: \"SET_ITEMS\"; payload: Item[] }\r\n  | { type: \"ADD_ITEM\"; payload: Item }\r\n  | { type: \"REMOVE_ITEM\"; id: Item[\"id\"] }\r\n  | {\r\n      type: \"UPDATE_ITEM\";\r\n      id: Item[\"id\"];\r\n      payload: object;\r\n    }\r\n  | { type: \"EMPTY_WATCHLIST\" }\r\n  | { type: \"CLEAR_WATCHLIST_META\" }\r\n  | { type: \"SET_WATCHLIST_META\"; payload: Metadata }\r\n  | { type: \"UPDATE_WATCHLIST_META\"; payload: Metadata };\r\n\r\nexport const initialState: any = {\r\n  items: [],\r\n  isEmpty: true,\r\n  totalItems: 0,\r\n  totalUniqueItems: 0,\r\n  //cartTotal: 0,\r\n  metadata: {},\r\n};\r\n\r\nconst WatchlistContext = React.createContext<WatchlistProviderState | undefined>(\r\n  initialState\r\n);\r\n\r\nexport const createWatchlistIdentifier = (len = 12) =>\r\n  [...Array(len)].map(() => (~~(Math.random() * 36)).toString(36)).join(\"\");\r\n\r\nexport const useWatchlist = () => {\r\n  const context = React.useContext(WatchlistContext);\r\n\r\n  if (!context) throw new Error(\"Expected to be wrapped in a WatchlistProvider\");\r\n\r\n  return context;\r\n};\r\n\r\nfunction reducer(state: WatchlistProviderState, action: Actions) {\r\n  switch (action.type) {\r\n    case \"SET_ITEMS\":\r\n      return generateWatchlistState(state, action.payload);\r\n\r\n    case \"ADD_ITEM\": {\r\n      const items = [...state.items, action.payload];\r\n\r\n      return generateWatchlistState(state, items);\r\n    }\r\n\r\n    case \"UPDATE_ITEM\": {\r\n      const items = state.items.map((item: Item) => {\r\n        if (item.id !== action.id) return item;\r\n\r\n        return {\r\n          ...item,\r\n          ...action.payload,\r\n        };\r\n      });\r\n\r\n      return generateWatchlistState(state, items);\r\n    }\r\n\r\n    case \"REMOVE_ITEM\": {\r\n      const items = state.items.filter((i: Item) => i.id !== action.id);\r\n\r\n      return generateWatchlistState(state, items);\r\n    }\r\n\r\n    case \"EMPTY_WATCHLIST\":\r\n      return initialState;\r\n\r\n    case \"CLEAR_WATCHLIST_META\":\r\n      return {\r\n        ...state,\r\n        metadata: {},\r\n      };\r\n\r\n    case \"SET_WATCHLIST_META\":\r\n      return {\r\n        ...state,\r\n        metadata: {\r\n          ...action.payload,\r\n        },\r\n      };\r\n\r\n    case \"UPDATE_WATCHLIST_META\":\r\n      return {\r\n        ...state,\r\n        metadata: {\r\n          ...state.metadata,\r\n          ...action.payload,\r\n        },\r\n      };\r\n\r\n    default:\r\n      throw new Error(\"No action specified\");\r\n  }\r\n}\r\n\r\nconst generateWatchlistState = (state = initialState, items: Item[]) => {\r\n  const totalUniqueItems = calculateUniqueItems(items);\r\n  const isEmpty = totalUniqueItems === 0;\r\n\r\n  return {\r\n    ...initialState,\r\n    ...state,\r\n    items: calculateItemTotals(items),\r\n    totalItems: calculateTotalItems(items),\r\n    totalUniqueItems,\r\n    //cartTotal: calculateTotal(items),\r\n    isEmpty,\r\n  };\r\n};\r\n\r\nconst calculateItemTotals = (items: Item[]) =>\r\n  items.map(item => ({\r\n    ...item,\r\n    itemTotal: item.price * item.quantity!,\r\n  }));\r\n\r\n//const calculateTotal = (items: Item[]) =>\r\n  //items.reduce((total, item) => total + item.quantity! * item.price, 0);\r\n\r\nconst calculateTotalItems = (items: Item[]) =>\r\n  items.reduce((sum, item) => sum + item.quantity!, 0);\r\n\r\nconst calculateUniqueItems = (items: Item[]) => items.length;\r\n\r\nexport const WatchlistProvider: React.FC<{\r\n  children?: React.ReactNode;\r\n  id?: string;\r\n  defaultItems?: Item[];\r\n  onSetItems?: (items: Item[]) => void;\r\n  onItemAdd?: (payload: Item) => void;\r\n  onItemUpdate?: (payload: object) => void;\r\n  onItemRemove?: (id: Item[\"id\"]) => void;\r\n  storage?: (\r\n    key: string,\r\n    initialValue: string\r\n  ) => [string, (value: Function | string) => void];\r\n  metadata?: Metadata;\r\n}> = ({\r\n  children,\r\n  id: watchlistId,\r\n  defaultItems = [],\r\n  onSetItems,\r\n  onItemAdd,\r\n  onItemUpdate,\r\n  onItemRemove,\r\n  storage = useLocalStorage,\r\n  metadata,\r\n}) => {\r\n  const id = watchlistId ? watchlistId : createWatchlistIdentifier();\r\n\r\n  const [savedWatchlist, saveWatchlist] = storage(\r\n    watchlistId ? `react-use-watchlist-${id}` : `react-use-watchlist`,\r\n    JSON.stringify({\r\n      id,\r\n      ...initialState,\r\n      items: defaultItems,\r\n      metadata,\r\n    })\r\n  );\r\n\r\n  const [state, dispatch] = React.useReducer(reducer, JSON.parse(savedWatchlist));\r\n  React.useEffect(() => {\r\n    saveWatchlist(JSON.stringify(state));\r\n  }, [state, saveWatchlist]);\r\n\r\n  const setItems = (items: Item[]) => {\r\n    dispatch({\r\n      type: \"SET_ITEMS\",\r\n      payload: items.map(item => ({\r\n        ...item,\r\n        quantity: item.quantity || 1,\r\n      })),\r\n    });\r\n\r\n    onSetItems && onSetItems(items);\r\n  };\r\n\r\n  const addItem = (item: Item, quantity = 1) => {\r\n    if (!item.id) throw new Error(\"You must provide an `id` for items\");\r\n    //if (quantity <= 0) return;\r\n\r\n    const currentItem = state.items.find((i: Item) => i.id === item.id);\r\n\r\n    //if (!currentItem && !item.hasOwnProperty(\"price\"))\r\n      //throw new Error(\"You must pass a `price` for new items\");\r\n\r\n    if (!currentItem) {\r\n      const payload = { ...item, quantity };\r\n\r\n      dispatch({ type: \"ADD_ITEM\", payload });\r\n\r\n      onItemAdd && onItemAdd(payload);\r\n\r\n      return;\r\n    }\r\n\r\n    const payload = { ...item, quantity: currentItem.quantity + quantity };\r\n\r\n    dispatch({\r\n      type: \"UPDATE_ITEM\",\r\n      id: item.id,\r\n      payload,\r\n    });\r\n\r\n    onItemUpdate && onItemUpdate(payload);\r\n  };\r\n\r\n  const updateItem = (id: Item[\"id\"], payload: object) => {\r\n    if (!id || !payload) {\r\n      return;\r\n    }\r\n\r\n    dispatch({ type: \"UPDATE_ITEM\", id, payload });\r\n\r\n    onItemUpdate && onItemUpdate(payload);\r\n  };\r\n\r\n  const updateItemQuantity = (id: Item[\"id\"], quantity: number) => {\r\n    if (quantity <= 0) {\r\n      onItemRemove && onItemRemove(id);\r\n\r\n      dispatch({ type: \"REMOVE_ITEM\", id });\r\n\r\n      return;\r\n    }\r\n\r\n    const currentItem = state.items.find((item: Item) => item.id === id);\r\n\r\n    if (!currentItem) throw new Error(\"No such item to update\");\r\n\r\n    const payload = { ...currentItem, quantity };\r\n\r\n    dispatch({\r\n      type: \"UPDATE_ITEM\",\r\n      id,\r\n      payload,\r\n    });\r\n\r\n    onItemUpdate && onItemUpdate(payload);\r\n  };\r\n\r\n  const removeItem = (id: Item[\"id\"]) => {\r\n    if (!id) return;\r\n\r\n    dispatch({ type: \"REMOVE_ITEM\", id });\r\n\r\n    onItemRemove && onItemRemove(id);\r\n  };\r\n\r\n  const emptyWatchlist = () =>\r\n    dispatch({\r\n      type: \"EMPTY_WATCHLIST\",\r\n    });\r\n\r\n  const getItem = (id: Item[\"id\"]) =>\r\n    state.items.find((i: Item) => i.id === id);\r\n\r\n  const inWatchlist = (id: Item[\"id\"]) => state.items.some((i: Item) => i.id === id);\r\n\r\n  const clearWatchlistMetadata = () => {\r\n    dispatch({\r\n      type: \"CLEAR_WATCHLIST_META\",\r\n    });\r\n  };\r\n\r\n  const setWatchlistMetadata = (metadata: Metadata) => {\r\n    if (!metadata) return;\r\n\r\n    dispatch({\r\n      type: \"SET_WATCHLIST_META\",\r\n      payload: metadata,\r\n    });\r\n  };\r\n\r\n  const updateWatchlistMetadata = (metadata: Metadata) => {\r\n    if (!metadata) return;\r\n\r\n    dispatch({\r\n      type: \"UPDATE_WATCHLIST_META\",\r\n      payload: metadata,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <WatchlistContext.Provider\r\n      value={{\r\n        ...state,\r\n        getItem,\r\n        inWatchlist,\r\n        setItems,\r\n        addItem,\r\n        updateItem,\r\n        updateItemQuantity,\r\n        removeItem,\r\n        emptyWatchlist,\r\n        clearWatchlistMetadata,\r\n        setWatchlistMetadata,\r\n        updateWatchlistMetadata,\r\n      }}\r\n    >\r\n      {children}\r\n    </WatchlistContext.Provider>\r\n  );\r\n};\r\n"],"names":["useLocalStorage","key","initialValue","React","item","window","localStorage","getItem","error","storedValue","setStoredValue","setValue","value","valueToStore","Function","setItem","console","log","initialState","items","isEmpty","totalItems","totalUniqueItems","metadata","WatchlistContext","createWatchlistIdentifier","len","Array","map","Math","random","toString","join","useWatchlist","context","Error","reducer","state","action","type","generateWatchlistState","payload","id","filter","i","calculateUniqueItems","calculateItemTotals","calculateTotalItems","itemTotal","price","quantity","reduce","sum","length","WatchlistProvider","children","watchlistId","defaultItems","onSetItems","onItemAdd","onItemUpdate","onItemRemove","storage","JSON","stringify","savedWatchlist","saveWatchlist","parse","dispatch","setItems","addItem","currentItem","find","updateItem","updateItemQuantity","removeItem","emptyWatchlist","inWatchlist","some","clearWatchlistMetadata","setWatchlistMetadata","updateWatchlistMetadata","Provider"],"mappings":"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"}